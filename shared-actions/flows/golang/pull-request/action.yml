name: "Pull request flow for Golang project"
description: "This is my standard pipeline for pull request on Golang project"

inputs:
  appId:
    required: true
    description: ID of the Github app
  privateKey:
    required: true
    description: Private key of the Github app
  workingDirectory:
    required: false
    default: "."
    description: "Directory containing the Go project (passed to underlying actions)"

runs:
  using: "composite"
  steps:
    - name: Check code quality ğŸ«†
      uses: tchoupinax/repo-config/shared-actions/golang/golangci@v0
      with:
        workingDirectory: ${{ inputs.workingDirectory }}

    - name: Check build success ğŸ¦«
      uses: tchoupinax/repo-config/shared-actions/golang/goreleaser-build-only@v0
      with:
        workingDirectory: ${{ inputs.workingDirectory }}

    - name: Autodetect labels ğŸ”
      uses: tchoupinax/repo-config/shared-actions/dx/automatically-apply-labels@v0
      with:
        app-id: ${{ inputs.appId }}
        private-key: ${{ inputs.privateKey }}

