name: "Prepare draft release"
description: "When a pull request is merged, this runs on main branch and analyze labels to prepare the next release. It will update the current draft release or create it with updates"

inputs:
  appId:
    required: true
    description: ID of the Github app
  privateKey:
    required: true
    description: Private key of the Github app

runs:
  using: "composite"
  steps:
  - name: Clone repository
    uses: actions/checkout@v6

  - uses: actions/create-github-app-token@v2
    id: app-token
    with:
      app-id: ${{ inputs.appId }}
      private-key: ${{ inputs.privateKey }}

  - uses: release-drafter/release-drafter@v6
    env:
      GITHUB_TOKEN: ${{ steps.app-token.outputs.token }}
